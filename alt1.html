<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elektrophile Substitution am Benzol - Interaktiver Lernpfad</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
            font-size: 14px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        h1 {
            font-size: 1.6em;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 0.95em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 15px;
            padding: 15px;
            max-height: calc(100vh - 200px);
            overflow-y: auto;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .image-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .mechanism-wrapper {
            position: relative;
            max-width: 100%;
            display: inline-block;
        }

        #mechanism-image {
            max-width: 100%;
            height: auto;
            display: block;
            border-radius: 5px;
        }

        #overlay-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .brom-overlay {
            fill: rgba(210, 130, 70, 0.97);
            transition: opacity 1.2s ease-out;
        }

        .brom-overlay.fade-out {
            opacity: 0;
        }

        .chlor-overlay {
            fill: rgba(180, 200, 70, 0.97);
            transition: opacity 1.2s ease-out;
        }

        .chlor-overlay.fade-out {
            opacity: 0;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            border-radius: 8px;
            padding: 15px;
            display: none;
            font-size: 0.9em;
        }

        .info-box.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        .info-box.extra {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
        }

        .info-box h3 {
            color: #1976D2;
            margin-bottom: 10px;
            font-size: 1.05em;
        }

        .info-box.extra h3 {
            color: #f57c00;
        }

        .info-box p {
            line-height: 1.5;
            color: #333;
            margin-bottom: 8px;
        }

        .info-box p:last-child {
            margin-bottom: 0;
        }

        .question-box {
            background: #f3e5f5;
            border-left: 4px solid #9c27b0;
            border-radius: 8px;
            padding: 15px;
            display: none;
            font-size: 0.9em;
        }

        .question-box.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        .question-box h3 {
            color: #7b1fa2;
            margin-bottom: 10px;
            font-size: 1.05em;
        }

        .question-box p {
            margin-bottom: 10px;
            font-weight: 500;
        }

        .answer-option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 6px;
            padding: 10px 12px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .answer-option:hover {
            border-color: #9c27b0;
            background: #fce4ec;
        }

        .answer-option.correct {
            border-color: #4caf50;
            background: #e8f5e9;
        }

        .answer-option.wrong {
            border-color: #f44336;
            background: #ffebee;
        }

        .answer-option.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .feedback {
            margin-top: 12px;
            padding: 10px;
            border-radius: 6px;
            display: none;
            font-size: 0.9em;
        }

        .feedback.show {
            display: block;
            animation: fadeIn 0.5s;
        }

        .feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #4caf50;
        }

        .feedback.wrong {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #f44336;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin: 15px 20px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease-out;
        }

        .btn-next {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            display: none;
        }

        .btn-next.show {
            display: block;
        }

        .btn-next:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-next:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .step-indicator {
            text-align: center;
            padding: 8px;
            background: #f5f5f5;
            border-radius: 6px;
            font-weight: bold;
            color: #666;
            font-size: 0.9em;
        }

        .legend {
            background: #fffbea;
            border: 1px solid #f4d03f;
            border-radius: 6px;
            padding: 10px;
            margin-top: 10px;
            font-size: 0.85em;
            color: #7d6608;
        }

        .legend strong {
            color: #d68910;
        }

        /* Titelseite Styles */
        #title-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        #title-screen.hidden {
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none;
        }

        .title-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 700px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            animation: slideInTitle 0.8s ease-out;
        }

        @keyframes slideInTitle {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .title-image {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .title-content h1 {
            color: #764ba2;
            font-size: 2em;
            margin-bottom: 15px;
        }

        .title-content h2 {
            color: #667eea;
            font-size: 1.3em;
            margin-bottom: 20px;
            font-weight: normal;
        }

        .title-content p {
            color: #666;
            font-size: 1.05em;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .btn-start {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-start:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }

        .btn-start:active {
            transform: translateY(-1px);
        }
    </style>
</head>
<body>
    <!-- Titelseite -->
    <div id="title-screen">
        <div class="title-content">
            <img src="titelseite.png" alt="Labor" class="title-image">
            <h1>Herzlich Willkommen!</h1>
            <h2>Elektrophile Substitution am Benzol</h2>
            <p>
                Entdecke den faszinierenden Mechanismus der Halogenierung von Benzol!<br>
                In diesem interaktiven Lernpfad erf√§hrst du Schritt f√ºr Schritt, wie Brom und Chlor mit Benzol reagieren.
            </p>
            <p style="font-size: 0.95em; color: #888;">
                Beantworte Fragen, beobachte wie sich der Mechanismus enth√ºllt, und werde zum Experten der S<sub>E</sub>-Reaktion!
            </p>
            <button class="btn-start" onclick="startLearningPath()">Los geht's! ‚Üí</button>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>Elektrophile Substitution am Benzol (S<sub>E</sub>)</h1>
            <p class="subtitle" id="subtitle">Mechanismus der Halogenierung - Interaktiver Lernpfad</p>
            <p class="subtitle" id="round-indicator" style="font-size: 0.85em; margin-top: 5px;">Runde 1 von 2: Bromierung</p>
        </header>

        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <div class="main-content">
            <div class="image-container">
                <div class="mechanism-wrapper">
                    <img id="mechanism-image" src="benzol_sub.png" alt="Reaktionsmechanismus">
                    <svg id="overlay-svg" viewBox="0 0 1200 800" preserveAspectRatio="xMidYMid meet">
                        <!-- Brom-Overlays (Runde 1) -->
                        <g id="brom-overlays">
                            <rect id="brom-overlay-row2" class="brom-overlay" x="0" y="-100" width="1200" height="280"/>
                            <rect id="brom-overlay-row3" class="brom-overlay" x="0" y="180" width="1200" height="215"/>
                            <rect id="brom-overlay-row4" class="brom-overlay" x="0" y="395" width="1200" height="315"/>
                            <rect id="brom-overlay-row5" class="brom-overlay" x="0" y="710" width="1200" height="650"/>
                        </g>

                        <!-- Chlor-Overlays (Runde 2) - initial versteckt -->
                        <g id="chlor-overlays" style="display: none;">
                            <rect id="chlor-overlay-row2" class="chlor-overlay" x="0" y="-100" width="1200" height="280"/>
                            <rect id="chlor-overlay-row3" class="chlor-overlay" x="0" y="180" width="1200" height="215"/>
                            <rect id="chlor-overlay-row4" class="chlor-overlay" x="0" y="395" width="1200" height="315"/>
                            <rect id="chlor-overlay-row5" class="chlor-overlay" x="0" y="710" width="1200" height="650"/>
                        </g>
                    </svg>
                </div>
            </div>

            <div class="sidebar">
                <div class="step-indicator" id="step-indicator">Schritt 1 von 10</div>

                <div class="legend" id="legend-hint">
                    <strong>üí° Hinweis:</strong> Der orange-braune "Bromschleier" verschwindet Schritt f√ºr Schritt und gibt den Mechanismus frei - genau wie beim echten Versuch!
                </div>

                <!-- Info-Boxen f√ºr jeden Schritt -->
                <div class="info-box active" id="info-1">
                    <h3>Start: Benzol und Brom</h3>
                    <p>Vor dir siehst du oben ein Benzol-Molek√ºl (C‚ÇÜH‚ÇÜ) und ein Brom-Molek√ºl (Br‚ÇÇ).</p>
                    <p><strong>Beobachtung:</strong> Benzol reagiert <u>nicht</u> mit Br‚ÇÇ - weder bei Raumtemperatur noch mit UV-Licht (anders als Alkene!)</p>
                </div>

                <div class="info-box" id="info-2">
                    <h3>Warum keine Reaktion?</h3>
                    <p>Benzol ist au√üergew√∂hnlich stabil durch sein <strong>aromatisches System</strong>:</p>
                    <p>Die 6 œÄ-Elektronen sind √ºber den gesamten Ring <strong>delokalisiert</strong> und bilden eine besonders stabile Elektronenwolke. Diese Aromatizit√§t macht Benzol reaktionstr√§ge gegen√ºber einfachen Additionen.</p>
                </div>

                <div class="info-box extra" id="info-2-extra">
                    <h3>‚ÑπÔ∏è Warum Elektronenmangelverbindung?</h3>
                    <p><strong>FeBr‚ÇÉ</strong> ist normalerweise eine <em>Ionenverbindung</em> (Fe¬≥‚Å∫ und 3 Br‚Åª).</p>
                    <p>Im <strong>unpolaren Benzol</strong> liegt es jedoch als <em>kovalentes Molek√ºl</em> vor.</p>
                    <p>Das Eisen-Atom hat dann nur <strong>6 Valenzelektronen</strong> (3 Bindungen zu Br) statt der nach der Oktett-Regel angestrebten 8 Elektronen.</p>
                    <p>‚Üí Dadurch kann es als <strong>Lewis-S√§ure</strong> ein Elektronenpaar aufnehmen!</p>
                </div>

                <div class="info-box" id="info-3">
                    <h3>Der Katalysator: FeBr‚ÇÉ</h3>
                    <p>Mit FeBr‚ÇÉ als Katalysator wird die Reaktion m√∂glich!</p>
                    <p>FeBr‚ÇÉ ist eine <strong>Lewis-S√§ure</strong> (Elektronenmangelverbindung).</p>
                    <p>Der "Bromschleier" beginnt sich zu lichten...</p>
                </div>

                <div class="info-box" id="info-4">
                    <h3>Wechselwirkung: Br‚ÇÇ + FeBr‚ÇÉ</h3>
                    <p>FeBr‚ÇÉ <strong>polarisiert</strong> die Br-Br-Bindung durch Wechselwirkung mit einem freien Elektronenpaar des Broms.</p>
                    <p>Es entsteht ein partiell positives Brom-Atom (Br<sup>Œ¥+</sup>), das als <strong>Elektrophil</strong> wirken kann.</p>
                </div>

                <div class="info-box" id="info-5">
                    <h3>Angriff auf den Benzolring</h3>
                    <p>Das polarisierte Br<sup>Œ¥+</sup> greift die œÄ-Elektronenwolke des Benzols an.</p>
                    <p>Die Br-Br-Bindung wird <strong>heterolytisch gespalten</strong>:</p>
                    <p>Br‚ÇÇ + FeBr‚ÇÉ ‚Üí Br‚Å∫ + [FeBr‚ÇÑ]‚Åª</p>
                </div>

                <div class="info-box" id="info-6">
                    <h3>œÉ-Komplex (Wheland-Komplex)</h3>
                    <p>Es entsteht ein <strong>positiv geladener œÉ-Komplex</strong>.</p>
                    <p>Ein C-Atom wird sp¬≥-hybridisiert und bindet das Br-Atom. Die positive Ladung ist √ºber mehrere C-Atome delokalisiert.</p>
                    <p>‚ö†Ô∏è Das aromatische System ist in diesem Zwischenprodukt <strong>zerst√∂rt</strong>!</p>
                </div>

                <div class="info-box" id="info-7">
                    <h3>Mesomere Grenzstrukturen</h3>
                    <p>Die positive Ladung im œÉ-Komplex ist <strong>delokalisiert</strong>.</p>
                    <p>Wir zeichnen mehrere <strong>mesomere Grenzstrukturen</strong>, um zu zeigen, dass die Ladung √ºber mehrere C-Atome verteilt ist.</p>
                    <p>Diese Strukturen sind keine verschiedenen Molek√ºle, sondern verschiedene Darstellungen desselben Zustands!</p>
                </div>

                <div class="info-box" id="info-8">
                    <h3>Rearomatisierung</h3>
                    <p>Abspaltung von <strong>H‚Å∫</strong> f√ºhrt zur Rearomatisierung.</p>
                    <p>Das C-Atom wird wieder sp¬≤-hybridisiert, und das <strong>aromatische System wird wiederhergestellt</strong>.</p>
                    <p>Die Rearomatisierung ist energetisch sehr g√ºnstig, weil die Aromatizit√§tsenergie zur√ºckgewonnen wird!</p>
                </div>

                <div class="info-box" id="info-9">
                    <h3>Endprodukt</h3>
                    <p><strong>Produkte:</strong> Brombenzol + HBr</p>
                    <p>Der Katalysator FeBr‚ÇÉ wird regeneriert: [FeBr‚ÇÑ]‚Åª + H‚Å∫ ‚Üí FeBr‚ÇÉ + HBr</p>
                    <p><strong>Wichtig:</strong> Es ist eine <em>Substitution</em> (H wird durch Br ersetzt), keine Addition! Das aromatische System bleibt erhalten.</p>
                </div>

                <div class="info-box" id="info-10">
                    <h3>Zusammenfassung</h3>
                    <p>Die <strong>elektrophile Substitution</strong> verl√§uft in drei Hauptschritten:</p>
                    <p><strong>1.</strong> Bildung des Elektrophils (Br‚Å∫) durch Katalysator</p>
                    <p><strong>2.</strong> Angriff auf Benzol ‚Üí œÉ-Komplex (Zwischenprodukt)</p>
                    <p><strong>3.</strong> Rearomatisierung durch H‚Å∫-Abspaltung</p>
                    <p>Der "Bromschleier" ist komplett verschwunden - der gesamte Mechanismus ist sichtbar!</p>
                </div>

                <!-- Fragen -->
                <div class="question-box" id="question-1">
                    <h3>Frage 1</h3>
                    <p>Warum ist Benzol so stabil und unreaktiv?</p>
                    <div class="answer-option" data-correct="true">
                        a) Delokalisierte œÄ-Elektronen bilden ein aromatisches System
                    </div>
                    <div class="answer-option" data-correct="false">
                        b) Es hat zu viele Wasserstoff-Atome
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Der Ring ist zu klein f√ºr Reaktionen
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-2">
                    <h3>Frage 2</h3>
                    <p>Was bedeutet "Lewis-S√§ure"?</p>
                    <div class="answer-option" data-correct="false">
                        a) Eine Verbindung mit negativer Ladung
                    </div>
                    <div class="answer-option" data-correct="true">
                        b) Ein Elektronenpaar-Akzeptor (nimmt Elektronen auf)
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Eine Verbindung, die Protonen abgibt
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-3">
                    <h3>Frage 3</h3>
                    <p>Was entsteht bei der Wechselwirkung von Br‚ÇÇ mit FeBr‚ÇÉ?</p>
                    <div class="answer-option" data-correct="false">
                        a) Zwei negative Brom-Ionen
                    </div>
                    <div class="answer-option" data-correct="false">
                        b) Ein Brom-Radikal
                    </div>
                    <div class="answer-option" data-correct="true">
                        c) Ein polarisiertes Br‚ÇÇ-Molek√ºl mit Br<sup>Œ¥+</sup> als Elektrophil
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-4">
                    <h3>Frage 4</h3>
                    <p>Warum wird das aromatische System beim Angriff zun√§chst zerst√∂rt?</p>
                    <div class="answer-option" data-correct="false">
                        a) Der Ring √∂ffnet sich
                    </div>
                    <div class="answer-option" data-correct="true">
                        b) Ein C-Atom wird sp¬≥-hybridisiert und bindet Br kovalent
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Alle Bindungen werden l√§nger
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-5">
                    <h3>Frage 5</h3>
                    <p>Was zeigen die mesomeren Grenzstrukturen?</p>
                    <div class="answer-option" data-correct="false">
                        a) Es entstehen mehrere verschiedene Produkte
                    </div>
                    <div class="answer-option" data-correct="true">
                        b) Die Delokalisierung der positiven Ladung √ºber mehrere C-Atome
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Jede Struktur existiert einzeln und nacheinander
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-6">
                    <h3>Frage 6</h3>
                    <p>Warum ist die Rearomatisierung energetisch so g√ºnstig?</p>
                    <div class="answer-option" data-correct="false">
                        a) Brom braucht mehr Platz im Ring
                    </div>
                    <div class="answer-option" data-correct="false">
                        b) H‚Å∫ ist sehr reaktiv und will weg
                    </div>
                    <div class="answer-option" data-correct="true">
                        c) Die aromatische Stabilisierungsenergie wird zur√ºckgewonnen
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-7">
                    <h3>Frage 7</h3>
                    <p>Warum hei√üt es SUBSTITUTION und nicht ADDITION?</p>
                    <div class="answer-option" data-correct="true">
                        a) H wird durch Br ersetzt, das aromatische System bleibt erhalten
                    </div>
                    <div class="answer-option" data-correct="false">
                        b) Br wird einfach zum Benzol hinzugef√ºgt
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Es entstehen zwei verschiedene Produkte
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-8">
                    <h3>Frage 8</h3>
                    <p>Was passiert mit dem Katalysator FeBr‚ÇÉ?</p>
                    <div class="answer-option" data-correct="false">
                        a) Er zerf√§llt zu Fe und Br
                    </div>
                    <div class="answer-option" data-correct="true">
                        b) Er wird am Ende regeneriert und bleibt unver√§ndert
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Er wird im Produkt eingebaut
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-9">
                    <h3>Frage 9</h3>
                    <p>Was ist das energiereichste Zwischenprodukt?</p>
                    <div class="answer-option" data-correct="false">
                        a) Das Brombenzol
                    </div>
                    <div class="answer-option" data-correct="false">
                        b) Der √úbergangszustand bei der H‚Å∫-Abspaltung
                    </div>
                    <div class="answer-option" data-correct="true">
                        c) Der œÉ-Komplex (Wheland-Komplex)
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-10">
                    <h3>Abschlussfrage</h3>
                    <p>Welche Aussage trifft auf die Gesamtreaktion zu?</p>
                    <div class="answer-option" data-correct="false">
                        a) Es ist eine Addition, das Benzol wird aufgebrochen
                    </div>
                    <div class="answer-option" data-correct="true">
                        b) Es ist eine Substitution, bei der die Aromatizit√§t erhalten bleibt
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Es ist eine Eliminierung von Wasserstoff
                    </div>
                    <div class="feedback"></div>
                </div>

                <!-- ========== RUNDE 2: CHLORIERUNG (K√∂nner-Level) ========== -->

                <!-- Info-Boxen Runde 2 -->
                <div class="info-box" id="info-r2-1">
                    <h3>K√∂nner-Runde: Chlorierung</h3>
                    <p>Jetzt geht es um die <strong>Chlorierung von Benzol</strong>!</p>
                    <p>Der Mechanismus ist analog zur Bromierung, aber es gibt wichtige Unterschiede.</p>
                    <p>Der <strong>gr√ºnlich-gelbe "Chlorschleier"</strong> wird wieder Schritt f√ºr Schritt verschwinden.</p>
                </div>

                <div class="info-box" id="info-r2-2">
                    <h3>Vergleich: Cl‚ÇÇ vs. Br‚ÇÇ</h3>
                    <p>Chlor ist <strong>elektronegativer</strong> als Brom (EN: Cl = 3,0; Br = 2,8).</p>
                    <p>Die Cl-Cl-Bindung ist <strong>st√§rker</strong> als die Br-Br-Bindung, aber auch <strong>polarer</strong>.</p>
                    <p>Trotzdem l√§uft auch diese Reaktion nur mit Katalysator ab!</p>
                </div>

                <div class="info-box" id="info-r2-3">
                    <h3>Katalysator: FeCl‚ÇÉ oder AlCl‚ÇÉ</h3>
                    <p>Bei der Chlorierung werden oft <strong>FeCl‚ÇÉ</strong> oder <strong>AlCl‚ÇÉ</strong> als Lewis-S√§uren eingesetzt.</p>
                    <p>Beide wirken nach dem gleichen Prinzip: Sie polarisieren das Cl‚ÇÇ-Molek√ºl.</p>
                </div>

                <div class="info-box" id="info-r2-4">
                    <h3>Polarisierung und Aktivierung</h3>
                    <p>Wie bei Brom: FeCl‚ÇÉ zieht Elektronendichte aus der Cl-Cl-Bindung.</p>
                    <p>Es entsteht: Cl<sup>Œ¥+</sup>-Cl<sup>Œ¥-</sup>¬∑¬∑¬∑FeCl‚ÇÉ</p>
                    <p>Das Chlor-Atom mit partieller Positivladung wird zum Elektrophil.</p>
                </div>

                <div class="info-box" id="info-r2-5">
                    <h3>Bildung des œÉ-Komplexes</h3>
                    <p>Der elektrophile Angriff erfolgt analog: Cl‚ÇÇ + FeCl‚ÇÉ ‚Üí Cl‚Å∫ + [FeCl‚ÇÑ]‚Åª</p>
                    <p>Das Cl‚Å∫-Ion (bzw. hochpolarisiertes Cl) greift die œÄ-Elektronenwolke an.</p>
                    <p>Es bildet sich der kationische œÉ-Komplex mit gebundenem Chlor.</p>
                </div>

                <div class="info-box" id="info-r2-6">
                    <h3>Stabilit√§t des œÉ-Komplexes</h3>
                    <p>Der œÉ-Komplex ist das <strong>energiereichste Intermediat</strong> der Reaktion.</p>
                    <p>Seine Stabilit√§t wird durch Mesomerie erh√∂ht - die positive Ladung ist delokalisiert.</p>
                    <p>Je besser diese Delokalisierung, desto stabiler der Komplex!</p>
                </div>

                <div class="info-box" id="info-r2-7">
                    <h3>Mesomerie und Stabilisierung</h3>
                    <p>Die drei mesomeren Grenzstrukturen zeigen die <strong>Ladungsverteilung</strong>.</p>
                    <p>In Wirklichkeit ist die Ladung √ºber alle drei gezeigten Positionen verteilt.</p>
                    <p>Diese Delokalisierung ist der Grund, warum der œÉ-Komplex √ºberhaupt existieren kann.</p>
                </div>

                <div class="info-box" id="info-r2-8">
                    <h3>Rearomatisierung</h3>
                    <p>Die Abspaltung von H‚Å∫ ist der <strong>treibende Schritt</strong>.</p>
                    <p>Die Rearomatisierung gewinnt ca. 150 kJ/mol Stabilisierungsenergie zur√ºck!</p>
                    <p>Deshalb findet <strong>Substitution</strong> statt, nicht Addition.</p>
                </div>

                <div class="info-box" id="info-r2-9">
                    <h3>Produkte der Chlorierung</h3>
                    <p><strong>Chlorbenzol + HCl</strong> sind die Produkte.</p>
                    <p>Der Katalysator wird regeneriert: [FeCl‚ÇÑ]‚Åª + H‚Å∫ ‚Üí FeCl‚ÇÉ + HCl</p>
                    <p>Chlorbenzol ist ein wichtiges Zwischenprodukt in der chemischen Industrie.</p>
                </div>

                <div class="info-box" id="info-r2-10">
                    <h3>Reaktivit√§t der Halogene</h3>
                    <p>Allgemeine Reaktivit√§t bei der elektrophilen Substitution:</p>
                    <p><strong>F‚ÇÇ > Cl‚ÇÇ > Br‚ÇÇ > I‚ÇÇ</strong></p>
                    <p>Aber: F‚ÇÇ ist zu reaktiv (unkontrolliert!), I‚ÇÇ zu unreaktiv.</p>
                    <p>Cl‚ÇÇ und Br‚ÇÇ sind in der Praxis am wichtigsten!</p>
                </div>

                <!-- Fragen Runde 2 (K√∂nner-Level) -->
                <div class="question-box" id="question-r2-1">
                    <h3>K√∂nner-Frage 1</h3>
                    <p>Welche Aussage √ºber die Bindungsst√§rke ist korrekt?</p>
                    <div class="answer-option" data-correct="true">
                        a) Die Cl-Cl-Bindung ist st√§rker als die Br-Br-Bindung
                    </div>
                    <div class="answer-option" data-correct="false">
                        b) Die Br-Br-Bindung ist st√§rker, weil Brom gr√∂√üer ist
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Beide Bindungen sind gleich stark
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-r2-2">
                    <h3>K√∂nner-Frage 2</h3>
                    <p>Warum kann auch AlCl‚ÇÉ als Katalysator verwendet werden?</p>
                    <div class="answer-option" data-correct="false">
                        a) Aluminium ist ein Metall wie Eisen
                    </div>
                    <div class="answer-option" data-correct="true">
                        b) AlCl‚ÇÉ ist ebenfalls eine Lewis-S√§ure mit Elektronenmangel
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) AlCl‚ÇÉ ist billiger als FeCl‚ÇÉ
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-r2-3">
                    <h3>K√∂nner-Frage 3 (Vergleich)</h3>
                    <p>Vergleiche: Welches Halogen bildet das st√§rkere Elektrophil?</p>
                    <div class="answer-option" data-correct="false">
                        a) Br‚Å∫ ist st√§rker, weil es gr√∂√üer ist
                    </div>
                    <div class="answer-option" data-correct="true">
                        b) Cl‚Å∫ ist st√§rker, weil Chlor elektronegativer ist
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Beide sind gleich stark als Elektrophile
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-r2-4">
                    <h3>K√∂nner-Frage 4 (Transfer)</h3>
                    <p>Was w√ºrde passieren, wenn man die Reaktion OHNE Katalysator durchf√ºhrt?</p>
                    <div class="answer-option" data-correct="false">
                        a) Die Reaktion w√ºrde viel schneller ablaufen
                    </div>
                    <div class="answer-option" data-correct="true">
                        b) Praktisch keine Reaktion - die Aktivierungsenergie ist zu hoch
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Es w√ºrde Addition statt Substitution stattfinden
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-r2-5">
                    <h3>K√∂nner-Frage 5 (Mechanismus)</h3>
                    <p>Welcher Schritt ist geschwindigkeitsbestimmend (langsamster Schritt)?</p>
                    <div class="answer-option" data-correct="true">
                        a) Die Bildung des œÉ-Komplexes (elektrophiler Angriff)
                    </div>
                    <div class="answer-option" data-correct="false">
                        b) Die Abspaltung von H‚Å∫ (Rearomatisierung)
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Die Polarisierung durch den Katalysator
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-r2-6">
                    <h3>K√∂nner-Frage 6 (Energetik)</h3>
                    <p>Warum ist die Rearomatisierung energetisch so g√ºnstig?</p>
                    <div class="answer-option" data-correct="false">
                        a) Weil H‚Å∫ sehr klein ist und leicht abgespalten wird
                    </div>
                    <div class="answer-option" data-correct="false">
                        b) Weil das Halogen viel Platz braucht
                    </div>
                    <div class="answer-option" data-correct="true">
                        c) Weil ca. 150 kJ/mol Aromatizit√§tsenergie zur√ºckgewonnen werden
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-r2-7">
                    <h3>K√∂nner-Frage 7 (Vergleich)</h3>
                    <p>Was ist der Hauptunterschied zwischen Halogenierung von Alkenen und Aromaten?</p>
                    <div class="answer-option" data-correct="false">
                        a) Alkene brauchen einen Katalysator, Aromaten nicht
                    </div>
                    <div class="answer-option" data-correct="true">
                        b) Bei Alkenen erfolgt Addition, bei Aromaten Substitution
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Es gibt keinen Unterschied im Mechanismus
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-r2-8">
                    <h3>K√∂nner-Frage 8 (Transfer)</h3>
                    <p>Welche Rolle spielt [FeCl‚ÇÑ]‚Åª im Gesamtmechanismus?</p>
                    <div class="answer-option" data-correct="false">
                        a) Es ist das Endprodukt der Reaktion
                    </div>
                    <div class="answer-option" data-correct="true">
                        b) Es stabilisiert das abgespaltene Cl‚Åª und wird sp√§ter regeneriert
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Es hat keine wichtige Funktion
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-r2-9">
                    <h3>K√∂nner-Frage 9 (Verst√§ndnis)</h3>
                    <p>Warum werden in der Praxis haupts√§chlich Cl‚ÇÇ und Br‚ÇÇ verwendet?</p>
                    <div class="answer-option" data-correct="true">
                        a) F‚ÇÇ ist zu reaktiv (unkontrolliert), I‚ÇÇ zu unreaktiv
                    </div>
                    <div class="answer-option" data-correct="false">
                        b) Cl‚ÇÇ und Br‚ÇÇ sind billiger als F‚ÇÇ und I‚ÇÇ
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Nur Cl‚ÇÇ und Br‚ÇÇ k√∂nnen Katalysatoren aktivieren
                    </div>
                    <div class="feedback"></div>
                </div>

                <div class="question-box" id="question-r2-10">
                    <h3>K√∂nner-Frage 10 (Transfer)</h3>
                    <p>Was w√ºrde passieren, wenn man versucht, das aromatische System durch Addition zu zerst√∂ren?</p>
                    <div class="answer-option" data-correct="false">
                        a) Es w√ºrde problemlos funktionieren wie bei Alkenen
                    </div>
                    <div class="answer-option" data-correct="true">
                        b) Es w√§re sehr ung√ºnstig, da die Aromatizit√§tsenergie verloren ginge
                    </div>
                    <div class="answer-option" data-correct="false">
                        c) Es ist chemisch unm√∂glich
                    </div>
                    <div class="feedback"></div>
                </div>

                <button class="btn-next" id="btn-next">Weiter ‚Üí</button>
            </div>
        </div>
    </div>

    <script>
        // Titelseite ausblenden und Lernpfad starten
        function startLearningPath() {
            const titleScreen = document.getElementById('title-screen');
            titleScreen.classList.add('hidden');

            // Nach der √úbergangsanimation die Titelseite komplett entfernen
            setTimeout(() => {
                titleScreen.style.display = 'none';
            }, 800);
        }

        let currentRound = 1;
        let currentStep = 1;
        const totalSteps = 10;

        // Konfiguration f√ºr beide Runden
        const rounds = {
            1: {
                image: 'benzol_sub.png',
                overlayGroup: 'brom-overlays',
                overlayPrefix: 'brom-overlay-',
                title: 'Runde 1 von 2: Bromierung',
                legendText: 'Der orange-braune "Bromschleier" verschwindet Schritt f√ºr Schritt'
            },
            2: {
                image: 'benzol_sub2.png',
                overlayGroup: 'chlor-overlays',
                overlayPrefix: 'chlor-overlay-',
                title: 'Runde 2 von 2: Chlorierung (K√∂nner-Level)',
                legendText: 'Der gr√ºnlich-gelbe "Chlorschleier" verschwindet Schritt f√ºr Schritt'
            }
        };

        // Overlay-Mapping: welches Overlay wird bei welchem Schritt ausgeblendet
        const overlaySteps = {
            3: 'row2',     // Zeile 2: Wechselwirkung/Angriff sichtbar
            5: 'row3',     // Zeile 3: Sigma-Komplex sichtbar
            6: 'row4',     // Zeile 4: Mesomere Grenzstrukturen sichtbar
            8: 'row5'      // Zeile 5: Endprodukt sichtbar
        };

        // Initialisierung
        function init() {
            updateProgress();
            setupQuestionListeners();
            document.getElementById('btn-next').addEventListener('click', nextStep);
        }

        // Runde starten (wird auch f√ºr Runde 2 verwendet)
        function startRound(roundNumber) {
            currentRound = roundNumber;
            currentStep = 1;

            const config = rounds[roundNumber];

            // Bild wechseln
            document.getElementById('mechanism-image').src = config.image;

            // Overlays wechseln und zur√ºcksetzen
            document.getElementById('brom-overlays').style.display = roundNumber === 1 ? 'block' : 'none';
            document.getElementById('chlor-overlays').style.display = roundNumber === 2 ? 'block' : 'none';

            // Alle Overlays der neuen Runde zur√ºcksetzen (fade-out entfernen)
            if (roundNumber === 2) {
                document.querySelectorAll('.chlor-overlay').forEach(overlay => {
                    overlay.classList.remove('fade-out');
                });
            }

            // Header aktualisieren
            document.getElementById('round-indicator').textContent = config.title;

            // Legende aktualisieren
            const legend = document.getElementById('legend-hint');
            if (legend) {
                legend.innerHTML = `<strong>üí° Hinweis:</strong> ${config.legendText} und gibt den Mechanismus frei - genau wie beim echten Versuch!`;
                legend.style.display = 'block';
            }

            // Fortschritt aktualisieren
            updateProgress();

            // Weiter-Button verstecken
            document.getElementById('btn-next').classList.remove('show');

            // Erste Info und Frage anzeigen
            setTimeout(() => {
                showCurrentContent();
            }, 500);
        }

        // Aktuelle Info-Box und Frage anzeigen
        function showCurrentContent() {
            const prefix = currentRound === 1 ? 'info-' : 'info-r2-';
            const questionPrefix = currentRound === 1 ? 'question-' : 'question-r2-';

            const infoBox = document.getElementById(`${prefix}${currentStep}`);
            if (infoBox) {
                infoBox.classList.add('active');
            }

            // Bei Schritt 2 in Runde 1: zeige Extra-Info
            if (currentRound === 1 && currentStep === 2) {
                setTimeout(() => {
                    const extraInfo = document.getElementById('info-2-extra');
                    if (extraInfo) {
                        extraInfo.classList.add('active');
                    }
                }, 800);
            }

            // Frage nach kurzer Verz√∂gerung anzeigen
            setTimeout(() => {
                const questionBox = document.getElementById(`${questionPrefix}${currentStep}`);
                if (questionBox) {
                    questionBox.classList.add('active');
                }
            }, 1200);
        }

        // Fortschrittsanzeige aktualisieren
        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progress').style.width = progress + '%';
            document.getElementById('step-indicator').textContent = `Schritt ${currentStep} von ${totalSteps}`;
        }

        // Fragen-Listener einrichten
        function setupQuestionListeners() {
            document.querySelectorAll('.answer-option').forEach(option => {
                option.addEventListener('click', function() {
                    if (this.classList.contains('disabled')) return;

                    const questionBox = this.closest('.question-box');
                    const isCorrect = this.dataset.correct === 'true';
                    const feedback = questionBox.querySelector('.feedback');
                    const allOptions = questionBox.querySelectorAll('.answer-option');

                    // Alle Optionen deaktivieren
                    allOptions.forEach(opt => opt.classList.add('disabled'));

                    // Markiere richtig/falsch
                    if (isCorrect) {
                        this.classList.add('correct');
                        feedback.textContent = '‚úì Richtig! Sehr gut!';
                        feedback.className = 'feedback show correct';

                        // Zeige "Weiter"-Button
                        setTimeout(() => {
                            document.getElementById('btn-next').classList.add('show');
                        }, 500);
                    } else {
                        this.classList.add('wrong');
                        feedback.textContent = '‚úó Nicht ganz. √úberlege noch einmal...';
                        feedback.className = 'feedback show wrong';

                        // Nach 2 Sekunden wieder aktivieren
                        setTimeout(() => {
                            allOptions.forEach(opt => opt.classList.remove('disabled'));
                            this.classList.remove('wrong');
                            feedback.classList.remove('show');
                        }, 2000);
                    }
                });
            });
        }

        // N√§chster Schritt
        function nextStep() {
            if (currentStep >= totalSteps) {
                showCompletion();
                return;
            }

            currentStep++;
            updateProgress();

            // Verstecke die Legende nach dem ersten Schritt
            if (currentStep === 2) {
                const legend = document.getElementById('legend-hint');
                if (legend) {
                    legend.style.display = 'none';
                }
            }

            // Verstecke aktuelle Info und Frage
            document.querySelectorAll('.info-box.active, .question-box.active').forEach(el => {
                el.classList.remove('active');
            });

            // Setze vorherige Frage zur√ºck
            document.querySelectorAll('.answer-option').forEach(opt => {
                opt.classList.remove('correct', 'wrong', 'disabled');
            });
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.classList.remove('show');
            });

            // Overlay ausblenden, falls f√ºr diesen Schritt definiert
            if (overlaySteps[currentStep]) {
                const config = rounds[currentRound];
                const overlayId = config.overlayPrefix + overlaySteps[currentStep];
                const overlay = document.getElementById(overlayId);
                if (overlay) {
                    overlay.classList.add('fade-out');
                }
            }

            // Zeige neue Info und Frage
            showCurrentContent();

            // Verstecke "Weiter"-Button
            document.getElementById('btn-next').classList.remove('show');
        }

        // Abschluss
        function showCompletion() {
            document.querySelectorAll('.info-box.active, .question-box.active').forEach(el => {
                el.classList.remove('active');
            });

            // Alle verbleibenden Overlays der aktuellen Runde entfernen
            const config = rounds[currentRound];
            document.querySelectorAll(`.${config.overlayPrefix.replace('-', '-overlay').slice(0, -1)}`).forEach(overlay => {
                overlay.classList.add('fade-out');
            });

            const completionBox = document.createElement('div');
            completionBox.className = 'info-box active';
            completionBox.id = 'completion-box';
            completionBox.style.background = 'linear-gradient(135deg, #a8e063 0%, #56ab2f 100%)';
            completionBox.style.color = 'white';
            completionBox.style.borderLeft = '4px solid #2d7a1f';

            if (currentRound === 1) {
                // Nach Runde 1: √úbergang zu Runde 2
                completionBox.innerHTML = `
                    <h3 style="color: white;">üéâ Runde 1 geschafft!</h3>
                    <p>Super! Du hast den Mechanismus der <strong>Bromierung</strong> erfolgreich durchgearbeitet.</p>
                    <p>Der "Bromschleier" ist vollst√§ndig verschwunden - der komplette Mechanismus ist sichtbar!</p>
                    <p style="margin-top: 15px; padding-top: 15px; border-top: 2px solid rgba(255,255,255,0.3);">
                        <strong>Bereit f√ºr die K√∂nner-Runde?</strong><br>
                        Jetzt geht es um die <strong>Chlorierung</strong> - mit anspruchsvolleren Fragen zu Vergleich, Transfer und tieferem Verst√§ndnis!
                    </p>
                    <button id="btn-start-round2" style="
                        background: white;
                        color: #56ab2f;
                        border: none;
                        padding: 12px 24px;
                        border-radius: 8px;
                        font-size: 1em;
                        font-weight: bold;
                        cursor: pointer;
                        margin-top: 15px;
                        width: 100%;
                        transition: all 0.3s;
                    ">Zur K√∂nner-Runde: Chlorierung ‚Üí</button>
                `;

                setTimeout(() => {
                    document.getElementById('btn-start-round2').addEventListener('click', () => {
                        // Entferne Completion Box
                        document.getElementById('completion-box').remove();
                        // Alle Infoboxen und Fragen verstecken
                        document.querySelectorAll('.info-box, .question-box').forEach(el => {
                            el.classList.remove('active');
                        });
                        // Starte Runde 2
                        startRound(2);
                    });
                }, 100);

            } else {
                // Nach Runde 2: Finale Gratulation
                completionBox.innerHTML = `
                    <h3 style="color: white;">üèÜ Perfekt! Beide Runden gemeistert!</h3>
                    <p>Herzlichen Gl√ºckwunsch! Du hast sowohl die <strong>Bromierung</strong> als auch die <strong>Chlorierung</strong> erfolgreich durchgearbeitet.</p>
                    <p>Du kennst jetzt den kompletten Mechanismus der <strong>elektrophilen Substitution am Benzol</strong> und kannst die verschiedenen Halogene vergleichen!</p>
                    <p style="margin-top: 15px; padding-top: 15px; border-top: 2px solid rgba(255,255,255,0.3);">
                        <strong>Was du gelernt hast:</strong><br>
                        ‚úì Katalyse durch Lewis-S√§uren<br>
                        ‚úì Bildung und Stabilisierung des œÉ-Komplexes<br>
                        ‚úì Mesomerie und Ladungsdelokalisierung<br>
                        ‚úì Rearomatisierung und Energetik<br>
                        ‚úì Vergleich verschiedener Halogene
                    </p>
                `;

                // Challenge-Box f√ºr Energiediagramm
                setTimeout(() => {
                    const challengeBox = document.createElement('div');
                    challengeBox.className = 'info-box active';
                    challengeBox.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                    challengeBox.style.color = 'white';
                    challengeBox.style.borderLeft = '4px solid #4c51bf';
                    challengeBox.innerHTML = `
                        <h3 style="color: white;">üöÄ N√§chste Herausforderung</h3>
                        <p>Du hast den Mechanismus verstanden - jetzt bist du bereit f√ºr den n√§chsten Schritt!</p>
                        <p style="margin-top: 12px;"><strong>Deine Aufgabe:</strong></p>
                        <p>Recherchiere zum <strong>Energiediagramm</strong> der elektrophilen Substitution und erkl√§re:</p>
                        <ul style="margin-left: 20px; margin-top: 8px; line-height: 1.6;">
                            <li>Wo liegt der œÉ-Komplex im Energiediagramm?</li>
                            <li>Welcher Schritt hat die h√∂chste Aktivierungsenergie?</li>
                            <li>Warum ist die Gesamtreaktion exotherm oder endotherm?</li>
                            <li>Wie unterscheiden sich die Energiediagramme f√ºr Cl‚ÇÇ und Br‚ÇÇ?</li>
                        </ul>
                        <p style="margin-top: 12px; font-size: 0.95em; opacity: 0.9;">
                            üí° Tipp: Achte besonders auf den Energiegewinn bei der Rearomatisierung!
                        </p>
                    `;
                    document.querySelector('.sidebar').appendChild(challengeBox);
                }, 800);
            }

            document.querySelector('.sidebar').appendChild(completionBox);
        }

        // Start
        init();

        // Erste Info und Frage nach 2 Sekunden zeigen
        setTimeout(() => {
            document.getElementById('info-1').classList.add('active');
            setTimeout(() => {
                document.getElementById('question-1').classList.add('active');
            }, 1200);
        }, 1000);
    </script>
</body>
</html>
